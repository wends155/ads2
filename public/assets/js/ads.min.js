(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L;C=angular.module("ads",["phonecatFilters","restService"]),C.config(["$routeProvider",function(e){var t;return t="/assets/partials/user",e.when("/",{templateUrl:""+t+"/index.html",controller:w}).when("/products",{templateUrl:"/assets/partials/product-list.html",controller:p}).when("/product/:phoneId",{templateUrl:"/assets/partials/phone-detail.html",controller:l}).when("/catalog",{templateUrl:""+t+"/catalog.html",controller:b}).when("/cart",{templateUrl:""+t+"/cart.html",controller:y}).when("/profile",{templateUrl:""+t+"/profile.html",controller:S}).when("/change",{templateUrl:""+t+"/change.html",controller:i}).when("/orders",{templateUrl:""+t+"/orders.html",controller:E}).when("/return/:id",{templateUrl:""+t+"/return.html",controller:x}).otherwise({redirectTo:"/"})}]),T=angular.module("admin",["restService","AdminServices"]),T.config(["$routeProvider",function(i){var u;return u="/assets/partials/admin",i.when("/",{templateUrl:"/assets/partials/admin-index.html"}).when("/products",{templateUrl:"/assets/partials/products.html",controller:c}).when("/product/:id",{templateUrl:"/assets/partials/product-detail.html",controller:h}).when("/brand",{templateUrl:"/assets/partials/brand.html",controller:e}).when("/brand/:id",{templateUrl:"/assets/partials/brand-detail.html",controller:t}).when("/company",{templateUrl:"/assets/partials/company.html",controller:s}).when("/company/:id",{templateUrl:"/assets/partials/company-detail.html",controller:o}).when("/category",{templateUrl:"/assets/partials/category.html",controller:n}).when("/category/:id",{templateUrl:"/assets/partials/category-detail.html",controller:r}).when("/catalog").when("/orders",{templateUrl:""+u+"/orders.html",controller:a}).when("/order/:id",{templateUrl:""+u+"/order_details.html",controller:f}).when("/dealers").when("/reports").when("/sms").when("/profiles",{templateUrl:""+u+"/profiles.html",controller:v}).when("/profiles/:id",{templateUrl:""+u+"/profiles_detail.html",controller:m}).when("/profiles/:id/orders",{templateUrl:""+u+"/profile_orders.html",controller:d}).otherwise({redirectTo:"/"}),this}]),k=angular.module("phonecatFilters",[]),k.filter("startFrom",function(){return function(e,t){return angular.isArray(e)?e.slice(t):e}}),p=["$scope","$http","$filter",function(e,t,n){return t.get("/product/all.json").success(function(t){return e.products=t})}],l=["$scope","$routeParams",function(e,t){return e.phoneId=t.phoneId,e.spinner=!0,e.hello=function(t){return e.msg="hello "+t,e.spinner=!1}}],c=["$scope","$http",function(e,t){return t.get("/product/all.json").success(function(t){return e.products=t,e.spinner=!1}),t.get("/company/all.json").success(function(t){return e.companies=t}),t.get("/category/all.json").success(function(t){return e.categories=t}),t.get("/brand/all.json").success(function(t){return e.brands=t}),e.limit=20,e.saved=!1,e.spinner=!0,e.cancel=function(){return e.product={}},e.submit=function(){return console.log(JSON.stringify(e.product)),t.post("/product/new.json",JSON.stringify(e.product)).success(function(t){return e.saved=!0,e.products.push(t),e.product={}})},e["delete"]=function(n){return t["delete"]("/product/"+n+".json").success(function(){return t.get("/product/all.json").success(function(t){return e.products=t})})}}],h=["$scope","$routeParams","$http",function(e,t,n){return n.get("/product/"+t.id+".json").success(function(t){return e.product=t,e.spinner=!1}),n.get("/company/all.json").success(function(t){return e.companies=t}),n.get("/category/all.json").success(function(t){return e.categories=t}),n.get("/brand/all.json").success(function(t){return e.brands=t}),e.id=t.id,e.spinner=!0,e.saved=!1,e.submit=function(){return console.log(JSON.stringify(e.product)),n.post("/product/"+e.id+".json",JSON.stringify(e.product)).success(function(){return e.saved=!0})}}],e=["$scope","$http",function(e,t){return t.get("/brand/all.json").success(function(t){return e.brands=t}),e["delete"]=function(n){return t["delete"]("/brand/"+n+".json").success(function(){return t.get("/brand/all.json").success(function(t){return e.brands=t})})},e.submit=function(){return t.post("/brand/new.json",JSON.stringify(e.brand)).success(function(t){return e.brands.push(t),e.brand={}})}}],t=["$scope","$http","$routeParams","Brand",function(e,t,n,r){return e.id=n.id,t.get("/brand/"+e.id+".json").success(function(t){return e.brand=t}),e.caption="Cancel",e.products=r.products({id:e.id}),e.submit=function(){return t.post("/brand/"+e.id+".json",JSON.stringify(e.brand)).success(function(){return e.saved=!0,e.caption="Back"})}}],s=["$scope","$http",function(e,t){return t.get("/company/all.json").success(function(t){return e.companies=t}),e["delete"]=function(n){return t["delete"]("/company/"+n+".json").success(function(){return t.get("/company/all.json").success(function(t){return e.companies=t})})},e.submit=function(){return t.post("/company/new.json",JSON.stringify(e.company)).success(function(t){return e.companies.push(t),e.company={}})}}],o=["$scope","$routeParams","$http",function(e,t,n){return n.get("/company/"+t.id+".json").success(function(t){return e.company=t}),e.caption="Cancel",e.submit=function(){return n.post("/company/"+t.id+".json",JSON.stringify(e.company)).success(function(){return e.saved=!0,e.caption="Back"})}}],n=["$scope","$http",function(e,t){return t.get("/category/all.json").success(function(t){return e.categories=t}),e["delete"]=function(n){return t["delete"]("/category/"+n+".json").success(function(){return t.get("/category/all.json").success(function(t){return e.categories=t})})},e.submit=function(){return t.post("/category/new.json",JSON.stringify(e.category)).success(function(t){return e.categories.push(t),e.category={}})}}],r=["$scope","$routeParams","$http",function(e,t,n){return n.get("/category/"+t.id+".json").success(function(t){return e.category=t}),e.caption="Cancel",e.submit=function(){return n.post("/category/"+t.id+".json",JSON.stringify(e.category)).success(function(){return e.saved=!0,e.caption="Back"})}}],a=["$scope","adOrder",function(e,t){return window.order=t}],f=["$scope","$routeParams",function(e,t){return console.log(t.id)}],v=["$scope","adProfiles",function(e,t){return t.query(function(t){return e.profiles=t}),e.remove=function(n){return n.$delete(function(){return t.query(function(t){return e.profiles=t,humane.log("dealer removed from list")})})}}],m=["$scope","adProfiles","$routeParams",function(e,t,n){return t.get({id:n.id},function(t){return e.profile=t,window.profile=t})}],d=["$scope","adProfiles","$routeParams",function(e,t,n){return t.orders({id:n.id},function(t){return e.data=t,e.orders=t,e.predicate="",e.reverse=!0,e.spinner=!0}),e.filterPaid=function(){var t,n;return e.paid?(t=function(){var t,r,i,s;i=e.data,s=[];for(t=0,r=i.length;t<r;t++)n=i[t],n.date_paid!==null&&s.push(n);return s}(),e.orders=t):(t=function(){var t,r,i,s;i=e.data,s=[];for(t=0,r=i.length;t<r;t++)n=i[t],n.date_paid===null&&s.push(n);return s}(),e.orders=t)},e.filterClaimed=function(){var t,n;return e.claimed?(t=function(){var t,r,i,s;i=e.data,s=[];for(t=0,r=i.length;t<r;t++)n=i[t],n.date_claimed!==null&&s.push(n);return s}(),e.orders=t):(t=function(){var t,r,i,s;i=e.data,s=[];for(t=0,r=i.length;t<r;t++)n=i[t],n.date_claimed===null&&s.push(n);return s}(),e.orders=t)},e.reset=function(){return e.paid=!1,e.claimed=!1,e.orders=e.data}}],b=["$scope","Company","Category","Product","Cart","$location",function(e,t,n,r,i,s){return e.companies=t.query(),e.categories=n.query(),e.products=r.query(function(t){return e.spinner=!0}),e.add=function(e){return e.quantity=1,i.add(e),s.path("/cart")}}],w=["$scope","$http",function(e,t){}],y=["$scope","Cart","$location","Order",function(e,t,n,r){return e.items=t.items,window.cart=t,e.total=function(){var n,r,i,s,o,u;r=function(){var t,r,i,s;i=e.items,s=[];for(t=0,r=i.length;t<r;t++)n=i[t],s.push(n.price*n.quantity);return s}(),s=0;for(o=0,u=r.length;o<u;o++)i=r[o],s+=i;return t.store(e.items),s},e.remove=function(e){return t.removeItem(e)},e.clear=function(){return e.items=[],t.clear(),humane.log("Cart cleared.")},e.order=function(){var t;return console.log(e.items),t=new r,t.date=Date.now()/1e3,t.items=e.items,t.date_paid=!1,t.date_claimed=!1,t.$save(),e.clear(),n.path("/orders")},e.$on("logout",function(t){return e.clear()})}],E=["$scope","Order","$location",function(e,t,n){return window.order=t,t.query(function(t){return e.data=t,e.orders=t,e.predicate="",e.reverse=!0,e.spinner=!0}),e.filterPaid=function(){var t,n;return e.paid?(t=function(){var t,r,i,s;i=e.data,s=[];for(t=0,r=i.length;t<r;t++)n=i[t],n.date_paid!==null&&s.push(n);return s}(),e.orders=t):(t=function(){var t,r,i,s;i=e.data,s=[];for(t=0,r=i.length;t<r;t++)n=i[t],n.date_paid===null&&s.push(n);return s}(),e.orders=t)},e.filterClaimed=function(){var t,n;return e.claimed?(t=function(){var t,r,i,s;i=e.data,s=[];for(t=0,r=i.length;t<r;t++)n=i[t],n.date_claimed!==null&&s.push(n);return s}(),e.orders=t):(t=function(){var t,r,i,s;i=e.data,s=[];for(t=0,r=i.length;t<r;t++)n=i[t],n.date_claimed===null&&s.push(n);return s}(),e.orders=t)},e.reset=function(){return e.paid=!1,e.claimed=!1,e.orders=e.data},e["return"]=function(e){return n.path("/return/"+e.id)}}],S=["$scope","$http","Profile",function(e,t,n){return n.get(function(e){return window.profile=e}),t.get("/profile").success(function(t){return e.profile=t,e.spinner=!0}),e.submit=function(){return t.post("/profile",JSON.stringify(e.profile)).success(function(t){return e.profile=t,e.saved=!0,humane.log("Profile Saved")})}}],x=["$scope","$location","$routeParams","Item","Alternative",function(e,t,n,r,i){return r.get({id:n.id},function(t){return console.log(t),e.item=t,i.query({id:e.item.product.id},function(t){return e.alts=t})}),e.submit=function(){return e.item.$save()}}],u=["$scope","Cart","$location","$rootScope","Order",function(e,t,n,r,i){return i.query(function(t){return e.order=t.length}),e.count=function(){return t.items.length},e.logout=function(){return r.$broadcast("logout",{}),n.path("/logout"),t.clear()}}],i=["$scope","$http",function(e,t){var n;return n=e,n.verified=!1,e.verify=function(){return t.post("/verify_password",JSON.stringify(e.user)).success(function(){return console.log(JSON.stringify(n.user)),n.verified=!0}).error(function(){return n.fail=!0,console.log(JSON.stringify(n.user)),n.user.password="",humane.log("wrong password!")})},n.change=function(){var e,r,i;return n.status="",e=n["new"].password,r=n["new"].password_conf,i={password:n.user.password,new_password:e,new_password_confirm:r},i=JSON.stringify(i),e===r?t.post("/change_password",i).success(function(){return humane.log("Password Changed Successfully"),n["new"]={},n.verified=!1,n.user={}}).error(function(){return humane.log("Password error")}):(n.status="error",humane.log("Passwords do not match"),n["new"]={}),console.log(i)}}],g=["$scope","$http",function(e,t){return e.login=!1,e.check_username=function(){var n;return n=e.user.username,console.log(n),n===void 0?(e.username_invalid=!1,e.username_valid=!1,e.username_state="error"):t.get("/check/"+n).error(function(){return e.valid=!0,e.username_state="success",e.username_valid=!0,e.username_invalid=!1,console.log("valid username")}).success(function(){return e.valid=!1,e.username_state="error",e.username_invalid=!0,e.username_valid=!1,console.log("username already taken")})},e.confirm=function(){return e.user.password!==void 0?e.user.password===e.user.password_confirm?(e.password_state="success",e.password_valid=!0,console.log("equal")):(e.password_state="error",e.password_valid=!1,console.log("not equal")):(e.password_state="error",e.password_valid=!1)},e.submit=function(){var n;return e.profile.birthday=""+e.profile.bday.month+"/"+e.profile.bday.day+"/"+e.profile.bday.year,n={user:e.user,profile:e.profile},n=JSON.stringify(n),t.post("/user",n).success(function(t){return e.user={},e.profile={},e.login=!0}).error(function(){return e.failed=!0}),console.log(n)}}],C.controller("RegisterCtrl",g),C.controller("MenuCtrl",u),L=angular.module("restService",["ngResource"]),L.factory("Product",["$resource",function(e){return e("/product/:id.json",{id:"@id"},{query:{method:"GET",params:{id:"all"},isArray:!0}})}]),L.factory("Brand",["$resource",function(e){return e("/brand/:id.json/:products",{id:"@id"},{query:{method:"GET",params:{id:"all"},isArray:!0},products:{method:"GET",params:{products:"products"},isArray:!0}})}]),L.factory("Company",["$resource",function(e){return e("/company/:id.json/:products",{id:"@id"},{query:{method:"GET",params:{id:"all"},isArray:!0},products:{method:"GET",params:{products:"products"},isArray:!0}})}]),L.factory("Category",["$resource",function(e){return e("/category/:id.json/:products",{id:"@id"},{query:{method:"GET",params:{id:"all"},isArray:!0},products:{method:"GET",params:{products:"products"},isArray:!0}})}]),L.factory("Profile",["$resource",function(e){return e("/profile",{})}]),L.factory("Order",["$resource",function(e){return e("/orders/:id",{id:"@id"})}]),L.factory("Item",["$resource",function(e){return e("/items/:id",{id:"@id"})}]),L.factory("Alternative",["$resource",function(e){return e("/alt/:id")}]),L.service("localStorageService",[function(){return{prefix:"ads.",isSupported:function(){try{return"localStorage"in window&&window["localStorage"]!=null}catch(e){return!1}},add:function(e,t){try{return localStorage.setItem(this.prefix+e,t)}catch(n){return console.error(n.Description),-1}},get:function(e){return localStorage.getItem(this.prefix+e)},remove:function(e){return localStorage.removeItem(this.prefix+e)},clearAll:function(){var e,t,n,r,i,s,o;n=this.prefix.length,t=function(){var t;t=[];for(e in localStorage)e.substr(0,n)===this.prefix&&t.push(e);return t}.call(this),o=[];for(i=0,s=t.length;i<s;i++)r=t[i],o.push(function(e){return localStorage.removeItem(e)}(r));return o}}}]),L.factory("Cart",["localStorageService",function(e){var t,n;return n=function(){var t;return e.get("cart")!=null?(t=e.get("cart"),JSON.parse(t)):(e.add("cart","[]"),t=e.get("cart"),JSON.parse(t))},t={persist:function(){return e.add("cart",JSON.stringify(this.items))},items:n(),add:function(t){var n,r;return n=this.items.push(t),r=JSON.stringify(this.items),e.add("cart",r),n},get:function(e){return this.items[e]},getItem:function(e){var t;return t=this.items.indexOf(e),t>=0?t:!1},set:function(e,t){return this.items[e]=t,this.persist(),t},store:function(e){return this.items=e,this.persist()},remove:function(e){return this.items.splice(e,1),this.persist()},removeItem:function(e){var t;return t=this.items.indexOf(e),this.remove(t)},removeById:function(e){var t,n;return n=function(){var n,r,i,s;i=this.items,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],t.id===e&&s.push(t);return s}.call(this),console.log(n),n},clear:function(){return this.items=[],this.persist()}}}]),N=angular.module("AdminServices",["ngResource"]),N.factory("adOrder",["$resource",function(e){return e("/orders/:id",{id:"@id"})}]),N.factory("adProfiles",["$resource",function(e){return e("/profiles/:id/:orders",{id:"@id"},{orders:{method:"GET",params:{orders:"orders"},isArray:!0}})}])}).call(this);